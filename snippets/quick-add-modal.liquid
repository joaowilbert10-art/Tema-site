{% comment %}
  Quick Add Modal snippet - Modal de adição rápida
{% endcomment %}

<modal-dialog id="QuickAddModal" class="quick-add-modal">
  <div class="quick-add-modal__content" role="dialog" aria-label="{{ 'products.product.choose_product_options' | t: product_name: product.title | escape }}" aria-modal="true">
    <div class="quick-add-modal__content-header">
      <h2 class="quick-add-modal__content-heading h1">{{ 'products.product.choose_product_options' | t: product_name: product.title | escape }}</h2>
      <button class="quick-add-modal__close-button modal__close-button link link--text focus-inset" aria-label="{{ 'accessibility.close' | t }}">
        <svg class="icon icon-close" aria-hidden="true" focusable="false">
          <use href="#icon-close">
        </svg>
      </button>
    </div>
    <div class="quick-add-modal__content-body">
      <div class="quick-add-modal__product-info">
        <div class="quick-add-modal__product-image">
          {%- if product.featured_media -%}
            <img
              src="{{ product.featured_media | image_url: width: 300 }}"
              alt="{{ product.featured_media.alt | escape }}"
              width="{{ product.featured_media.width }}"
              height="{{ product.featured_media.height }}"
              loading="lazy"
            >
          {%- endif -%}
        </div>
        <div class="quick-add-modal__product-details">
          <h3 class="quick-add-modal__product-title">{{ product.title }}</h3>
          <div class="quick-add-modal__product-price">
            {{ product.price | money }}
          </div>
        </div>
      </div>
      
      <div class="quick-add-modal__form">
        {%- form 'product', product, id: 'quick-add-form', class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled>
          
          <div class="quick-add-modal__buttons">
            <button
              type="submit"
              name="add"
              class="btn btn-primary btn-lg quick-add-modal__submit"
              aria-haspopup="dialog"
              data-sold-out-message="true"
              {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
            >
              <span>
                {%- if product.selected_or_first_available_variant.available -%}
                  {{ 'products.product.add_to_cart' | t }}
                {%- else -%}
                  {{ 'products.product.sold_out' | t }}
                {%- endif -%}
              </span>
              <div class="loading-overlay__spinner hidden">
                <svg aria-hidden="true" focusable="false" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                  <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                </svg>
              </div>
            </button>
          </div>
        {%- endform -%}
      </div>
    </div>
  </div>
</modal-dialog>
